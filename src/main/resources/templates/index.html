<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ì–ª–∞–≤–Ω–∞—è ‚Äî SteelBoard</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f8; margin: 0; }
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .sort-links a { text-decoration: none; color: #555; margin-left: 15px; font-size: 14px; }
        .sort-links a.active { color: #3498db; font-weight: bold; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; }
        .product-card { background: white; border-radius: 10px; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .card-img-wrapper { height: 200px; background: #eee; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .card-img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
        .no-image { color: #aaa; font-size: 40px; }
        .card-body { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-price { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 5px; }
        .card-title { font-size: 16px; color: #555; text-decoration: none; margin-bottom: 10px; line-height: 1.4; flex-grow: 1; }
        .card-title:hover { color: #3498db; }
        .btn-cart { display: block; text-align: center; background-color: #3498db; color: white; text-decoration: none; padding: 10px; border-radius: 6px; font-weight: 500; transition: background 0.2s; margin-top: 10px; }
        .btn-cart:hover { background-color: #2980b9; }
        .pagination { display: flex; justify-content: center; margin-top: 40px; gap: 5px; }
        .pagination a { padding: 8px 14px; background: white; border: 1px solid #ddd; text-decoration: none; color: #333; border-radius: 4px; }
        .empty-state { text-align: center; padding: 50px; color: #777; width: 100%; grid-column: 1 / -1; }
    </style>
</head>
<body>


<div th:replace="~{fragments/header :: navbar}"></div>

<div class="container">

    
    <div class="toolbar">
        <div>
            –ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: <b th:text="${productPage.totalElements}">0</b>
            <span th:if="${search != null and search != ''}"> –ø–æ –∑–∞–ø—Ä–æ—Å—É "<span th:text="${search}"></span>"</span>
        </div>

        <div class="sort-links">
            <span>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</span>
            
            <a th:href="@{/(search=${search}, page=0, sortField='price', sortOrder='asc')}"
               th:classappend="${sortField == 'price' and sortOrder == 'asc'} ? 'active'">–°–Ω–∞—á–∞–ª–∞ –¥–µ—à–µ–≤—ã–µ</a>

            <a th:href="@{/(search=${search}, page=0, sortField='price', sortOrder='desc')}"
               th:classappend="${sortField == 'price' and sortOrder == 'desc'} ? 'active'">–°–Ω–∞—á–∞–ª–∞ –¥–æ—Ä–æ–≥–∏–µ</a>

            <a th:href="@{/(search=${search}, page=0, sortField='name', sortOrder='asc')}"
               th:classappend="${sortField == 'name' and sortOrder == 'asc'} ? 'active'">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</a>
        </div>
    </div>

    
    <div class="product-grid">

        
        <div th:if="${productPage.empty}" class="empty-state">
            <h3>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã üòî</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
            <a th:href="@{/}" class="btn-cart" style="display:inline-block; width: auto; margin-top: 10px;">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</a>
        </div>

        
        <div th:each="product : ${productPage.content}" class="product-card">

            
            <a th:href="@{/product/{id}(id=${product.id})}" class="card-img-wrapper">
                <img th:if="${product.mainImageUrl != null}" th:src="${product.mainImageUrl}" alt="–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞">
                <div th:if="${product.mainImageUrl == null}" class="no-image">üì∑</div>
            </a>

            <div class="card-body">
                
                <div class="card-price" th:text="|${product.price} ‚ÇΩ|">0 ‚ÇΩ</div>

                
                <a th:href="@{/product/{id}(id=${product.id})}" class="card-title" th:text="${product.name}">–ù–∞–∑–≤–∞–Ω–∏–µ</a>

                
                
                
                <a th:href="@{/cart/add/{id}(id=${product.id})}" class="btn-cart">
                    –í –∫–æ—Ä–∑–∏–Ω—É
                </a>
            </div>
        </div>
    </div>

    
    <div class="pagination" th:if="${productPage.totalPages > 1}">
        
        <a th:href="@{/(page=${currentPage - 1}, search=${search}, sortField=${sortField}, sortOrder=${sortOrder})}"
           th:classappend="${productPage.first} ? 'disabled'">‚Üê</a>

        
        
        <a th:each="i : ${#numbers.sequence(0, productPage.totalPages - 1)}"
           th:if="${i < 10}"
           th:href="@{/(page=${i}, search=${search}, sortField=${sortField}, sortOrder=${sortOrder})}"
           th:text="${i + 1}"
           th:classappend="${i == currentPage} ? 'active'">1</a>

        
        <a th:href="@{/(page=${currentPage + 1}, search=${search}, sortField=${sortField}, sortOrder=${sortOrder})}"
           th:classappend="${productPage.last} ? 'disabled'">‚Üí</a>
    </div>

</div>

</body>
</html>