<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω–∫–∞ ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; }
        th { background: #f5f5f5; text-align: left; width: 200px; }
        .links-block { margin: 20px 0; padding: 15px; background: #f9f9f9; border: 1px solid #eee; }
        .links-block a { margin-right: 20px; text-decoration: none; color: #0066cc; font-weight: bold; }
        .links-block a:hover { text-decoration: underline; }
        .btn { padding: 8px 16px; background: #333; color: white; border: none; cursor: pointer; text-decoration: none; display: inline-block; font-size: 14px;}
        .btn:hover { background: #555; }
        .btn-back { background: #fff; color: #333; border: 1px solid #ccc; }
        .btn-back:hover { background: #eee; }
        .readonly { color: #555; }
        .bottom-bar { display: flex; justify-content: space-between; align-items: center; margin-top: 20px;}
    </style>
</head>

<body>

<h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <span th:text="${user.username}"></span></h2>

<div class="links-block">
    <span style="color:#666; margin-right:10px;">–ü–µ—Ä–µ–π—Ç–∏ –∫:</span>
    <a th:href="@{/admin/users/{id}/cart(id=${user.id})}">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
    <a th:href="@{/admin/users/{id}/products(id=${user.id})}">üì¶ –¢–æ–≤–∞—Ä—ã</a>
    <a th:href="@{/admin/users/{id}/reviews(id=${user.id})}">üí¨ –û—Ç–∑—ã–≤—ã</a>
</div>

<!-- –§–æ—Ä–º–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –±—ã–ª–∞ –≤–Ω–∏–∑—É -->
<form th:action="@{/admin/users/{id}/active(id=${user.id})}" method="post">
    <table>
        <tbody>
        <tr>
            <th>ID</th>
            <td th:text="${user.id}" class="readonly"></td>
        </tr>
        <tr>
            <th>Username</th>
            <td th:text="${user.username}" class="readonly"></td>
        </tr>
        <tr>
            <th>Email</th>
            <td th:text="${user.email}" class="readonly"></td>
        </tr>
        <tr>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <td th:text="${user.phoneNumber}" class="readonly"></td>
        </tr>
        <tr>
            <th>–ê–∫—Ç–∏–≤–µ–Ω</th>
            <td>
                <!-- –í–ê–†–ò–ê–ù–¢ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –ê–î–ú–ò–ù -->
                <div th:if="${user.isAdmin()}">
                <span style="color: green; font-weight: bold; font-size: 1.1em;">
                    ‚úî –ê–∫—Ç–∏–≤–µ–Ω
                </span>
                    <br>
                    <small style="color: #666;">
                        (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ–ª—å–∑—è –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å)
                    </small>
                    <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ, —á—Ç–æ–±—ã —Ñ–æ—Ä–º–∞ –Ω–µ –ª–æ–º–∞–ª–∞—Å—å, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è -->
                    <input type="hidden" name="active" value="true">
                </div>

                <!-- –í–ê–†–ò–ê–ù–¢ 2: –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ù–ï –∞–¥–º–∏–Ω) -->
                <div th:unless="${user.isAdmin()}">
                    <label style="cursor: pointer; display: flex; align-items: center;">
                        <input type="checkbox" name="active" value="true"
                               th:checked="${user.active}"
                               style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="margin-left: 8px;">–ê–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω</span>
                    </label>
                </div>
            </td>
        </tr>
        <tr>
            <th>–°–æ–∑–¥–∞–Ω</th>
            <td th:text="${#dates.format(user.createdAt, 'yyyy-MM-dd HH:mm')}" class="readonly"></td>
        </tr>
        <tr>
            <th>–û–±–Ω–æ–≤–ª—ë–Ω</th>
            <td th:text="${#dates.format(user.updatedAt, 'yyyy-MM-dd HH:mm')}" class="readonly"></td>
        </tr>
        </tbody>
    </table>

    <div class="bottom-bar">
        <a th:href="@{/admin/users}" class="btn btn-back">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>

        <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –ù–ï –∞–¥–º–∏–Ω -->
        <button type="submit" class="btn" th:unless="${user.isAdmin()}">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
        </button>

        <!-- –î–ª—è –∞–¥–º–∏–Ω–∞ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–µ—Ä—É—é –∫–Ω–æ–ø–∫—É –∏–ª–∏ –Ω–∏—á–µ–≥–æ -->
        <button type="button" class="btn" style="background: #ccc; cursor: not-allowed;" th:if="${user.isAdmin()}" disabled>
            –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
        </button>
    </div>
</form>

</body>
</html>