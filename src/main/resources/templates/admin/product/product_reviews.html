<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/admin_layout :: head('Отзывы о товаре')}"></head>
<body>

<div th:replace="~{fragments/admin_layout :: sidebar}"></div>

<div class="main-content">
    <div class="card">
        <h2 th:text="'Отзывы: ' + ${product.name}"></h2>
        <a th:href="@{/admin/products/{sku}(id=${product.sku})}">← Вернуться к товару</a><br><br>

        <table th:if="${not #lists.isEmpty(reviews)}">
            <tr><th>User</th><th>Оценка</th><th>Комментарий</th><th>Дата</th><th>Действие</th></tr>
            <tr th:each="r : ${reviews}">
                <td th:text="${r.user.username}"></td>
                <td th:text="${r.rating}"></td>
                <td th:text="${r.comment}"></td>
                <td th:text="${#dates.format(r.createdAt, 'dd.MM.yyyy')}"></td>
                <td>
                    <form th:action="@{/admin/products/{sku}/reviews/{rid}/delete(sku=${product.sku}, rid=${r.id})}" method="post">
                        <button type="submit" class="btn" onclick="return confirm('Удалить?');">Удалить</button>
                    </form>
                </td>
            </tr>
        </table>
        <div th:if="${#lists.isEmpty(reviews)}">Нет отзывов.</div>
    </div>
</div>
</body>
</html>